!function(a){"use strict";angular.module("firebase",[]).value("Firebase",a.Firebase).value("firebaseBatchDelay",50)}(window),function(){"use strict";angular.module("firebase").factory("$FirebaseArray",["$q","$log","$firebaseUtils",function(a,b,c){function d(a,b){return c.assertValidRecordFactory(b),this._list=[],this._factory=new b,this._inst=a,this._promise=this._init(),this._list}return d.prototype={add:function(a){return this.inst().push(a)},save:function(a){var b=this._resolveItem(a);if(!angular.isDefined(b))throw new Error("Invalid item or index",a);var c=angular.isDefined(b)?this._factory.getKey(b):null;return this.inst().set(c,this._factory.toJSON(b),this._compile)},remove:function(a){return this.inst().remove(this.keyAt(a))},keyAt:function(a){return this._factory.getKey(this._resolveItem(a))},indexFor:function(a){var b=this._factory;return this._list.findIndex(function(c){return b.getKey(c)===a})},loaded:function(){return this._promise},inst:function(){return this._inst},destroy:function(a){if(a&&b.error(a),this._list){b.debug("destroy called for FirebaseArray: "+this.ref.toString());var c=this.inst().ref();c.on("child_added",this._serverAdd,this),c.on("child_moved",this._serverMove,this),c.on("child_changed",this._serverUpdate,this),c.on("child_removed",this._serverRemove,this),this._list.length=0,this._list=null}},_serverAdd:function(a,b){var c=this._factory.create(a),d=null===b?0:this.indexFor(b);-1===d&&(d=this._list.length),this._list.splice(d,0,c),this._compile()},_serverRemove:function(){},_serverUpdate:function(){},_serverMove:function(){},_compile:function(){},_resolveItem:function(a){return angular.isNumber(a)?this._list[a]:a},_init:function(){var b=this,d=b._list,e=a.defer(),f=b.inst().ref(),g=c.getPublicMethods(b);return angular.forEach(g,function(a,c){d[c]=a.bind(b)}),b._compile=c.debounce(b._compile.bind(b),c.batchDelay),f.once("value",function(){e.resolve(d)},e.reject.bind(e)),f.on("child_added",b._serverAdd,b.destroy,b),f.on("child_moved",b._serverMove,b.destroy,b),f.on("child_changed",b._serverUpdate,b.destroy,b),f.on("child_removed",b._serverRemove,b.destroy,b),e.promise}},d}])}(),function(){"use strict";angular.module("firebase").factory("$FirebaseObject",function(){return function(){}})}(),function(){"use strict";function a(a,b){return angular.isObject(a)||(a={".value":a}),arguments.length>1&&(a.$id=b),console.log("objectinfy",a),a}function b(a,b){console.log("applyToBase",a,b);var c;for(c in a)a.hasOwnProperty(c)&&"$id"!==c&&!b.hasOwnProperty(c)&&delete a[c];for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}angular.module("firebase").factory("$FirebaseRecordFactory",function(){return function(){return{create:function(b){return a(b.val(),b.name())},update:function(c,d){return b(c,a(d.val(),d.name()))},toJSON:function(a){var b=angular.isFunction(a.toJSON)?a.toJSON():a;return this._cleanData(b)},destroy:function(a){return"function"==typeof a.off&&a.off(),a},getKey:function(a){if(console.log("getKey",a),a.hasOwnProperty("$id"))return a.$id;if(angular.isFunction(a.getId))return a.getId();throw new Error("No valid ID for record",a)},getPriority:function(a){return a.hasOwnProperty("$priority")?a.$priority:angular.isFunction(a.getPriority)?a.getPriority():null},_cleanData:function(a){return delete a.$id,a}}}})}(),function(){"use strict";angular.module("firebase").factory("$firebase",["$q","$firebaseUtils","$firebaseConfig",function(a,b,c){function d(a,b){return this instanceof d?(this._config=c(b),this._ref=a,this._array=null,this._object=null,void this._assertValidConfig(a,this._config)):new d(a,b)}return d.prototype={ref:function(){return this._ref},push:function(b){var c=a.defer(),d=this._ref.push(),e=this._handle(c,d);return arguments.length>0?d.set(b,e):e(),c.promise},set:function(b,c){var d=this._ref,e=a.defer();return arguments.length>1?d=d.child(b):c=b,d.set(c,this._handle(e)),e.promise},remove:function(b){var c=this._ref,d=a.defer();return arguments.length>0&&(c=c.child(b)),c.remove(this._handle(d)),d.promise},update:function(b,c){var d=this._ref,e=a.defer();return arguments.length>1?d=d.child(b):c=b,d.update(c,this._handle(e)),e.promise},transaction:function(){},asObject:function(){return this._object||(this._object=new this._config.objectFactory(this)),this._object},asArray:function(){return this._array||(this._array=new this._config.arrayFactory(this,this._config.recordFactory)),this._array},_handle:function(a){var b=Array.prototype.slice.call(arguments,1);return function(c){c?a.reject(c):a.resolve.apply(a,b)}},_assertValidConfig:function(a,c){if(b.assertValidRef(a,"Must pass a valid Firebase reference to $firebase (not a string or URL)"),b.assertValidRecordFactory(c.recordFactory),"function"!=typeof c.arrayFactory)throw new Error("config.arrayFactory must be a valid function");if("function"!=typeof c.objectFactory)throw new Error("config.arrayFactory must be a valid function")}},d}])}(),function(){"use strict";var a;angular.module("firebase").factory("$firebaseSimpleLogin",["$q","$timeout","$rootScope",function(b,c,d){return function(e){var f=new a(b,c,d,e);return f.construct()}}]),a=function(a,b,c,d){if(this._q=a,this._timeout=b,this._rootScope=c,this._loginDeferred=null,this._getCurrentUserDeferred=[],this._currentUserData=void 0,"string"==typeof d)throw new Error("Please provide a Firebase reference instead of a URL, eg: new Firebase(url)");this._fRef=d},a.prototype={construct:function(){var a={user:null,$login:this.login.bind(this),$logout:this.logout.bind(this),$createUser:this.createUser.bind(this),$changePassword:this.changePassword.bind(this),$removeUser:this.removeUser.bind(this),$getCurrentUser:this.getCurrentUser.bind(this),$sendPasswordResetEmail:this.sendPasswordResetEmail.bind(this)};if(this._object=a,!window.FirebaseSimpleLogin){var b=new Error("FirebaseSimpleLogin is undefined. Did you forget to include firebase-simple-login.js?");throw this._rootScope.$broadcast("$firebaseSimpleLogin:error",b),b}var c=new FirebaseSimpleLogin(this._fRef,this._onLoginEvent.bind(this));return this._authClient=c,this._object},login:function(a,b){var c=this._q.defer(),d=this;return this.getCurrentUser().then(function(){d._loginDeferred=c,d._authClient.login(a,b)}),c.promise},logout:function(){this._authClient.logout(),delete this._currentUserData},createUser:function(a,b){var c=this,d=this._q.defer();return c._authClient.createUser(a,b,function(a,b){a?(c._rootScope.$broadcast("$firebaseSimpleLogin:error",a),d.reject(a)):d.resolve(b)}),d.promise},changePassword:function(a,b,c){var d=this,e=this._q.defer();return d._authClient.changePassword(a,b,c,function(a){a?(d._rootScope.$broadcast("$firebaseSimpleLogin:error",a),e.reject(a)):e.resolve()}),e.promise},getCurrentUser:function(){var a=this,b=this._q.defer();return void 0!==a._currentUserData?b.resolve(a._currentUserData):a._getCurrentUserDeferred.push(b),b.promise},removeUser:function(a,b){var c=this,d=this._q.defer();return c._authClient.removeUser(a,b,function(a){a?(c._rootScope.$broadcast("$firebaseSimpleLogin:error",a),d.reject(a)):d.resolve()}),d.promise},sendPasswordResetEmail:function(a){var b=this,c=this._q.defer();return b._authClient.sendPasswordResetEmail(a,function(a){a?(b._rootScope.$broadcast("$firebaseSimpleLogin:error",a),c.reject(a)):c.resolve()}),c.promise},_onLoginEvent:function(a,b){if(this._currentUserData!==b||null!==a){var c=this;a?(c._loginDeferred&&(c._loginDeferred.reject(a),c._loginDeferred=null),c._rootScope.$broadcast("$firebaseSimpleLogin:error",a)):(this._currentUserData=b,c._timeout(function(){for(c._object.user=b,b?c._rootScope.$broadcast("$firebaseSimpleLogin:login",b):c._rootScope.$broadcast("$firebaseSimpleLogin:logout"),c._loginDeferred&&(c._loginDeferred.resolve(b),c._loginDeferred=null);c._getCurrentUserDeferred.length>0;){var a=c._getCurrentUserDeferred.pop();a.resolve(b)}}))}}}}(),Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){if(void 0===this||null===this)throw new TypeError("'this' is null or not defined");var c=this.length>>>0;for(b=+b||0,1/0===Math.abs(b)&&(b=0),0>b&&(b+=c,0>b&&(b=0));c>b;b++)if(this[b]===a)return b;return-1}),Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{enumerable:!1,configurable:!0,writable:!0,value:function(a){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof a)throw new TypeError("predicate must be a function");for(var b,c=Object(this),d=c.length>>>0,e=arguments[1],f=0;d>f;f++)if(f in c&&(b=c[f],a.call(e,b,f,c)))return f;return-1}}),"function"!=typeof Object.create&&!function(){var a=function(){};Object.create=function(b){if(arguments.length>1)throw Error("Second argument not supported");if(null===b)throw Error("Cannot set a null [[Prototype]]");if("object"!=typeof b)throw TypeError("Argument must be an object");return a.prototype=b,new a}}(),function(){"use strict";angular.module("firebase").factory("$firebaseConfig",["$FirebaseRecordFactory","$FirebaseArray","$FirebaseObject",function(a,b,c){return function(d){return angular.extend({recordFactory:a,arrayFactory:b,objectFactory:c},d)}}]).factory("$firebaseUtils",["$timeout","firebaseBatchDelay","$FirebaseRecordFactory",function(a,b,c){function d(b,c,d){function e(){j&&clearTimeout(j)}function f(){l||(l=Date.now())}function g(){f(),e(),Date.now()-l>m?i():j=h(i,c)}function h(){j=k.scope?setTimeout(function(){try{k.scope.$apply(i)}catch(a){console.error(a)}},c):a(i,c)}function i(){l=null,b()}c||(c=0);var j,k=angular.extend({maxWait:25*c||250},d),l=null,m=k.maxWait;return g}function e(a,b){if(!angular.isObject(a)||"function"!=typeof a.ref||"function"!=typeof a.transaction)throw new Error(b||"Invalid Firebase reference")}function f(a){if(!angular.isFunction(a)||!angular.isObject(a.prototype))throw new Error("Invalid argument passed for $FirebaseRecordFactory; must be a valid Class function");var b=c.prototype;for(var d in b)if(b.hasOwnProperty(d)&&angular.isFunction(b[d])&&"isValidFactory"!==d&&angular.isFunction(a.prototype[d]))throw new Error("Record factory does not have "+d+" method")}function g(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a}function h(a){var b={};for(var c in a)"function"!=typeof a[c]||/^_/.test(c)||(b[c]=a[c]);return b}return{debounce:d,assertValidRef:e,assertValidRecordFactory:f,batchDelay:b,inherit:g,getPublicMethods:h}}])}();