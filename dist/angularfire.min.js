!function(a){"use strict";angular.module("firebase",[]).value("Firebase",a.Firebase).value("firebaseBatchDelay",50)}(window),function(){"use strict";angular.module("firebase").factory("$FirebaseArray",["$log","$firebaseUtils",function(a,b){function c(a){return this._observers=[],this._events=[],this._list=[],this._factory=a.getRecordFactory(),this._inst=a,this._promise=this._init(),this._list}return c.prototype={add:function(a){return this.inst().push(a)},save:function(a){var c=this._resolveItem(a),d=this.keyAt(c);return null!==d?this.inst().set(d,this._factory.toJSON(c)):b.reject("Invalid record; could determine its key: "+a)},remove:function(a){var c=this.keyAt(a);return null!==c?this.inst().remove(this.keyAt(a)):b.reject("Invalid record; could not find key: "+a)},keyAt:function(a){var b=this._resolveItem(a);return angular.isUndefined(b)?null:this._factory.getKey(b)},indexFor:function(a){var b=this._factory;return this._list.findIndex(function(c){return b.getKey(c)===a})},loaded:function(){return this._promise},inst:function(){return this._inst},watch:function(a,b){var c=this._observers;return c.push([a,b]),function(){var d=c.findIndex(function(c){return c[0]===a&&c[1]===b});d>-1&&c.splice(d,1)}},destroy:function(b){if(b&&a.error(b),!this._isDestroyed){this._isDestroyed=!0,a.debug("destroy called for FirebaseArray: "+this._inst.ref().toString());var c=this.inst().ref();c.off("child_added",this._serverAdd,this),c.off("child_moved",this._serverMove,this),c.off("child_changed",this._serverUpdate,this),c.off("child_removed",this._serverRemove,this),this._list.length=0,this._list=null}},_serverAdd:function(a,b){var c=this.indexFor(a.name());if(c>-1)this._serverUpdate(a),null!==b&&c!==this.indexFor(b)+1&&this._serverMove(a,b);else{var d=this._factory.create(a);this._addAfter(d,b),this._addEvent("child_added",a.name(),b),this._compile()}},_serverRemove:function(a){var b=this._spliceOut(a.name());angular.isDefined(b)&&(this._addEvent("child_removed",a.name()),this._compile())},_serverUpdate:function(a){var b=this.indexFor(a.name());if(b>=0){var c=this._factory.toJSON(this._list[b]);this._list[b]=this._factory.update(this._list[b],a),angular.equals(c,this._list[b])||(this._addEvent("child_changed",a.name()),this._compile())}},_serverMove:function(a,b){var c=this._spliceOut(a.name());angular.isDefined(c)&&(this._addAfter(c,b),this._addEvent("child_moved",a.name(),b),this._compile())},_addEvent:function(a,b,c){var d={event:a,key:b};arguments.length>2&&(d.prevChild=c),this._events.push(d)},_addAfter:function(a,b){var c;null===b?c=0:(c=this.indexFor(b)+1,0===c&&(c=this._list.length)),this._list.splice(c,0,a)},_spliceOut:function(a){var b=this.indexFor(a);return b>-1?this._list.splice(b,1)[0]:void 0},_notify:function(){var a=this,b=a._events;a._events=[],b.length&&a._observers.forEach(function(a){a[0].call(a[1],b)})},_resolveItem:function(a){return angular.isNumber(a)?this._list[a]:a},_init:function(){var a=this,c=a._list,d=b.defer(),e=a.inst().ref();return b.getPublicMethods(a,function(b,d){c[d]=b.bind(a)}),a._compile=b.debounce(a._notify.bind(a),b.batchDelay),e.on("child_added",a._serverAdd,a.destroy,a),e.on("child_moved",a._serverMove,a.destroy,a),e.on("child_changed",a._serverUpdate,a.destroy,a),e.on("child_removed",a._serverRemove,a.destroy,a),e.once("value",function(){a._isDestroyed?d.reject("instance was destroyed before load completed"):d.resolve(c)},d.reject.bind(d)),d.promise}},c}])}(),function(){"use strict";function a(a,b,c){Object.defineProperty&&Object.defineProperty(a,b,{writable:c||!1,enumerable:!1,value:a[b]})}angular.module("firebase").factory("$FirebaseObject",["$parse","$firebaseUtils",function(b,c){function d(b){var e=this,f=c.defer(),g=b.getRecordFactory();e.$conf={def:f,inst:b,bound:null,factory:g,serverUpdate:function(a){g.update(e,a),h()}},e.$id=b.ref().name();var h=c.debounce(function(){e.$conf.bound&&e.$conf.bound.set(e.toJSON())}),i=["$id","$conf"].concat(Object.keys(d.prototype));angular.forEach(i,function(b){a(e,b,"$bound"===b)}),e.$conf.inst.ref().on("value",e.$conf.serverUpdate),e.$conf.inst.ref().once("value",f.resolve.bind(f,e),f.reject.bind(f))}return d.prototype={save:function(){return this.$conf.inst.set(this.$conf.factory.toJSON(this))},loaded:function(){return this.$conf.def.promise},inst:function(){return this.$conf.inst},bindTo:function(a,d){var e=this;if(e.$conf.bound)throw new Error("Can only bind to one scope variable at a time");var f=b(d),g=a.$watch(d,function(){var b=e.$conf.factory.toJSON(f(a));e.$conf.inst.set(e.$id,b)}),h=function(){e.$conf.bound&&(g(),e.$conf.bound=null)},i=e.$conf.bound={set:function(b){f.assign(a,b)},get:function(){return f(a)},unbind:h};a.$on("$destroy",i.unbind);var j=c.defer();return e.loaded().then(function(){j.resolve(h)},j.reject.bind(j)),j.promise},destroy:function(){var a=this;a.$isDestroyed||(a.$isDestroyed=!0,a.$conf.inst.ref().off("value",a.$conf.serverUpdate),a.$conf.bound&&a.$conf.bound.unbind(),a.forEach(function(b,c){delete a[c]}),a.$isDestroyed=!0)},toJSON:function(){return angular.extend({},this)},forEach:function(a,b){var c=this;angular.forEach(Object.keys(c),function(d){d.match(/^\$/)||a.call(b,c[d],d,c)})}},d}])}(),function(){"use strict";angular.module("firebase").factory("$firebase",["$firebaseUtils","$firebaseConfig",function(a,b){function c(a,d){return this instanceof c?(this._config=b(d),this._ref=a,this._array=null,this._object=null,void this._assertValidConfig(a,this._config)):new c(a,d)}return c.prototype={ref:function(){return this._ref},push:function(b){var c=a.defer(),d=this._ref.push(),e=this._handle(c,d);return arguments.length>0?d.set(b,e):e(),c.promise},set:function(b,c){var d=this._ref,e=a.defer();return arguments.length>1?d=d.child(b):c=b,d.set(c,this._handle(e,d)),e.promise},remove:function(b){var c=this._ref,d=a.defer();return arguments.length>0&&(c=c.child(b)),c.remove(this._handle(d,c)),d.promise},update:function(b,c){var d=this._ref,e=a.defer();return arguments.length>1?d=d.child(b):c=b,d.update(c,this._handle(e,d)),e.promise},transaction:function(b,c,d){var e=this._ref;angular.isFunction(b)?(d=c,c=b):e=e.child(b),angular.isUndefined(d)&&(d=!1);var f=a.defer();return e.transaction(c,function(a,b,c){a?f.reject(a):f.resolve(b?c:null)},d),f.promise},asObject:function(){return(!this._object||this._object.$isDestroyed)&&(this._object=new this._config.objectFactory(this,this._config.recordFactory)),this._object},asArray:function(){return(!this._array||this._array._isDestroyed)&&(this._array=new this._config.arrayFactory(this,this._config.recordFactory)),this._array},getRecordFactory:function(){return this._config.recordFactory},_handle:function(a){var b=Array.prototype.slice.call(arguments,1);return function(c){c?a.reject(c):a.resolve.apply(a,b)}},_assertValidConfig:function(b,c){if(a.assertValidRef(b,"Must pass a valid Firebase reference to $firebase (not a string or URL)"),!angular.isFunction(c.arrayFactory))throw new Error("config.arrayFactory must be a valid function");if(!angular.isFunction(c.objectFactory))throw new Error("config.arrayFactory must be a valid function");if(!angular.isObject(c.recordFactory))throw new Error("config.recordFactory must be a valid object with same methods as $FirebaseRecordFactory")}},c}])}(),function(){"use strict";function a(a,b,c){return angular.isObject(a)||(a={".value":a}),arguments.length>1&&(a.$id=b),angular.isDefined(c)&&null!==c&&(a[".priority"]=c),a}function b(a,b){return angular.forEach(a,function(c,d){a.hasOwnProperty(d)&&"$id"!==d&&!b.hasOwnProperty(d)&&delete a[d]}),angular.extend(a,b),a}angular.module("firebase").factory("$firebaseRecordFactory",["$log",function(c){return{create:function(b){return a(b.val(),b.name(),b.getPriority())},update:function(c,d){return b(c,a(d.val(),d.name(),d.getPriority()))},toJSON:function(a){var b;if(angular.isObject(a)){if(b=angular.isFunction(a.toJSON)?a.toJSON():angular.extend({},a),angular.isObject(b)){delete b.$id;for(var d in b)b.hasOwnProperty(d)&&".value"!==d&&".priority"!==d&&d.match(/[.$\[\]#]/)&&(c.error("Invalid key in record (skipped):"+d),delete b[d])}var e=this.getPriority(a);null!==e&&(b[".priority"]=e)}else b=angular.isDefined(a)?a:null;return b},destroy:function(a){return"function"==typeof a.destroy&&a.destroy(),a},getKey:function(a){return a.hasOwnProperty("$id")?a.$id:angular.isFunction(a.getId)?a.getId():null},getPriority:function(a){return a.hasOwnProperty(".priority")?a[".priority"]:angular.isFunction(a.getPriority)?a.getPriority():null}}}])}(),function(){"use strict";var a;angular.module("firebase").factory("$firebaseSimpleLogin",["$q","$timeout","$rootScope",function(b,c,d){return function(e){var f=new a(b,c,d,e);return f.construct()}}]),a=function(a,b,c,d){if(this._q=a,this._timeout=b,this._rootScope=c,this._loginDeferred=null,this._getCurrentUserDeferred=[],this._currentUserData=void 0,"string"==typeof d)throw new Error("Please provide a Firebase reference instead of a URL, eg: new Firebase(url)");this._fRef=d},a.prototype={construct:function(){var a={user:null,$login:this.login.bind(this),$logout:this.logout.bind(this),$createUser:this.createUser.bind(this),$changePassword:this.changePassword.bind(this),$removeUser:this.removeUser.bind(this),$getCurrentUser:this.getCurrentUser.bind(this),$sendPasswordResetEmail:this.sendPasswordResetEmail.bind(this)};if(this._object=a,!window.FirebaseSimpleLogin){var b=new Error("FirebaseSimpleLogin is undefined. Did you forget to include firebase-simple-login.js?");throw this._rootScope.$broadcast("$firebaseSimpleLogin:error",b),b}var c=new FirebaseSimpleLogin(this._fRef,this._onLoginEvent.bind(this));return this._authClient=c,this._object},login:function(a,b){var c=this._q.defer(),d=this;return this.getCurrentUser().then(function(){d._loginDeferred=c,d._authClient.login(a,b)}),c.promise},logout:function(){this._authClient.logout(),delete this._currentUserData},createUser:function(a,b){var c=this,d=this._q.defer();return c._authClient.createUser(a,b,function(a,b){a?(c._rootScope.$broadcast("$firebaseSimpleLogin:error",a),d.reject(a)):d.resolve(b)}),d.promise},changePassword:function(a,b,c){var d=this,e=this._q.defer();return d._authClient.changePassword(a,b,c,function(a){a?(d._rootScope.$broadcast("$firebaseSimpleLogin:error",a),e.reject(a)):e.resolve()}),e.promise},getCurrentUser:function(){var a=this,b=this._q.defer();return void 0!==a._currentUserData?b.resolve(a._currentUserData):a._getCurrentUserDeferred.push(b),b.promise},removeUser:function(a,b){var c=this,d=this._q.defer();return c._authClient.removeUser(a,b,function(a){a?(c._rootScope.$broadcast("$firebaseSimpleLogin:error",a),d.reject(a)):d.resolve()}),d.promise},sendPasswordResetEmail:function(a){var b=this,c=this._q.defer();return b._authClient.sendPasswordResetEmail(a,function(a){a?(b._rootScope.$broadcast("$firebaseSimpleLogin:error",a),c.reject(a)):c.resolve()}),c.promise},_onLoginEvent:function(a,b){if(this._currentUserData!==b||null!==a){var c=this;a?(c._loginDeferred&&(c._loginDeferred.reject(a),c._loginDeferred=null),c._rootScope.$broadcast("$firebaseSimpleLogin:error",a)):(this._currentUserData=b,c._timeout(function(){for(c._object.user=b,b?c._rootScope.$broadcast("$firebaseSimpleLogin:login",b):c._rootScope.$broadcast("$firebaseSimpleLogin:logout"),c._loginDeferred&&(c._loginDeferred.resolve(b),c._loginDeferred=null);c._getCurrentUserDeferred.length>0;){var a=c._getCurrentUserDeferred.pop();a.resolve(b)}}))}}}}(),Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){if(void 0===this||null===this)throw new TypeError("'this' is null or not defined");var c=this.length>>>0;for(b=+b||0,1/0===Math.abs(b)&&(b=0),0>b&&(b+=c,0>b&&(b=0));c>b;b++)if(this[b]===a)return b;return-1}),Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{enumerable:!1,configurable:!0,writable:!0,value:function(a){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof a)throw new TypeError("predicate must be a function");for(var b,c=Object(this),d=c.length>>>0,e=arguments[1],f=0;d>f;f++)if(f in c&&(b=c[f],a.call(e,b,f,c)))return f;return-1}}),"function"!=typeof Object.create&&!function(){var a=function(){};Object.create=function(b){if(arguments.length>1)throw new Error("Second argument not supported");if(null===b)throw new Error("Cannot set a null [[Prototype]]");if("object"!=typeof b)throw new TypeError("Argument must be an object");return a.prototype=b,new a}}(),Object.keys||(Object.keys=function(){"use strict";var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=c.length;return function(e){if("object"!=typeof e&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var f,g,h=[];for(f in e)a.call(e,f)&&h.push(f);if(b)for(g=0;d>g;g++)a.call(e,c[g])&&h.push(c[g]);return h}}()),"function"!=typeof Object.getPrototypeOf&&(Object.getPrototypeOf="object"==typeof"test".__proto__?function(a){return a.__proto__}:function(a){return a.constructor.prototype}),function(){"use strict";angular.module("firebase").factory("$firebaseConfig",["$firebaseRecordFactory","$FirebaseArray","$FirebaseObject",function(a,b,c){return function(d){var e=angular.extend({recordFactory:a,arrayFactory:b,objectFactory:c},d);return e}}]).factory("$firebaseUtils",["$q","$timeout","firebaseBatchDelay","$log",function(a,b,c,d){function e(a,c,e){function f(){k&&clearTimeout(k)}function g(){m||(m=Date.now())}function h(){g(),f(),Date.now()-m>n?j():k=i(j,c)}function i(){k=l.scope?setTimeout(function(){try{l.scope.$apply(j)}catch(a){d.error(a)}},c):b(j,c)}function j(){m=null,a()}c||(c=0);var k,l=angular.extend({maxWait:25*c||250},e),m=null,n=l.maxWait;return h}function f(a,b){if(!angular.isObject(a)||"function"!=typeof a.ref||"function"!=typeof a.transaction)throw new Error(b||"Invalid Firebase reference")}function g(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a}function h(a,b,c){for(var d={},e=Object.getPrototypeOf({}),f=angular.isFunction(a)&&angular.isObject(a.prototype)?a.prototype:Object.getPrototypeOf(a);f&&f!==e;){for(var g in f)f.hasOwnProperty(g)&&!d.hasOwnProperty(g)&&(d[g]=!0,b.call(c,f[g],g,f));f=Object.getPrototypeOf(f)}}function i(a,b,c){h(a,function(a,d){"function"!=typeof a||/^_/.test(d)||b.call(c,a,d)})}function j(){return a.defer()}function k(a){var b=j();return b.reject(a),b.promise}return{debounce:e,assertValidRef:f,batchDelay:c,inherit:g,getPrototypeMethods:h,getPublicMethods:i,reject:k,defer:j}}])}();